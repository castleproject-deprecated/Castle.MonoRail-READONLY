<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

###
### Macro metaauthor(author, email)
###
#macro(metaauthor $author $email)
<meta name="author" content="$author" />
<meta name="email" content="$email" />
#end

##
## Macro recursiveSiteMap(node)
##
#macro(recursiveSiteMap $node)
#set($levelstr = $node.GetAttribute("level"))
#set($level = $converter.ToInt($levelstr))
#if($node.GetAttribute("issubpage") == "true")
    <tr><td>
	$level
#foreach($i in [1..$level])&nbsp;&nbsp;&nbsp;&nbsp;#end
	<i>$node.GetAttribute("title")</i>
	</td></tr>
#elseif($node.Name == "section")
    <tr><td>$level
#foreach($i in [1..$level])&nbsp;&nbsp;&nbsp;&nbsp;#end $node.GetAttribute("title")
	</td></tr>
#else
	<tr><td>$level
#foreach($i in [1..$level])&nbsp;&nbsp;#end<strong>$node.GetAttribute("title")</strong>
	$node.Name
	</td></tr>
#end
#foreach($node in $node.ChildNodes)
#recursiveSiteMap($node)
#end
#end

##
## Macro buildsitemap(sitemapElement)
##
#macro(buildsitemap $elem)
#set($selection = $elem.GetAttribute("select"))
#set($selNode = $sitemap.SelectSingleNode($selection))
<table border="0px">
#recursiveSiteMap($selNode)
</table>
#end

##
## Macro section
##
#macro(section $content $level)

#foreach($elem in $content.ChildNodes)

#if($elem.Name == "title")
  <h${level}>$elem.FirstChild.Value</h${level}>
#elseif($elem.Name == "sitemap")
  #buildsitemap($elem)
#elseif($elem.Name == "p")
  <p>$elem.InnerText</p>
#end

#end

#set($newlevel = $level + 1)
#foreach($section in $content.SelectNodes("section"))
#section($section $newlevel)
#end

#end

#macro(buildtoc $tocElem)
<table id="toc" class="toc">
<tr><td>
<div id="toctitle">
<h2>Table of contents</h2>
</div>
<ul>
<li class="toclevel-1"><a href="#General"><span class="tocnumber">1</span> <span class="toctext">General</span></a>
<ul>
<li class="toclevel-2"><a href="#Is_MonoRail_stable.3F_Why_it.27s_not_1.0.3F"><span class="tocnumber">1.1</span> <span class="toctext">Is MonoRail stable? Why it"s not 1.0?</span></a></li>

<li class="toclevel-2"><a href="#Is_there_any_public_site_using_MonoRail.3F"><span class="tocnumber">1.2</span> <span class="toctext">Is there any public site using MonoRail?</span></a></li>
<li class="toclevel-2"><a href="#Where_to_ask_for_help.3F"><span class="tocnumber">1.3</span> <span class="toctext">Where to ask for help?</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Ajax_Support"><span class="tocnumber">2</span> <span class="toctext">Ajax Support</span></a>
<ul>
<li class="toclevel-2"><a href="#How_do_you_provide_Ajax_support.3F"><span class="tocnumber">2.1</span> <span class="toctext">How do you provide Ajax support?</span></a></li>

<li class="toclevel-2"><a href="#What_other_libraries_come_with_MonoRail.3F"><span class="tocnumber">2.2</span> <span class="toctext">What other libraries come with MonoRail?</span></a></li>
<li class="toclevel-2"><a href="#I.27m_trying_to_pass_some_parameters_to_my_action_but_it.27s_not_working._What.27s_wrong.3F"><span class="tocnumber">2.3</span> <span class="toctext">I"m trying to pass some parameters to my action but it"s not working. What"s wrong?</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Security"><span class="tocnumber">3</span> <span class="toctext">Security</span></a>
<ul>
<li class="toclevel-2"><a href="#Is_there_anything_I_should_be_concerned_about_related_to_security_when_using_MonoRail.3F"><span class="tocnumber">3.1</span> <span class="toctext">Is there anything I should be concerned about related to security when using MonoRail?</span></a></li>

</ul>
</li>
<li class="toclevel-1"><a href="#Authentication.2FAuthorization"><span class="tocnumber">4</span> <span class="toctext">Authentication/Authorization</span></a>
<ul>
<li class="toclevel-2"><a href="#How_to_handle_authentication_.2F_authorization.3F"><span class="tocnumber">4.1</span> <span class="toctext">How to handle authentication / authorization?</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#NVelocity_View_Engine"><span class="tocnumber">5</span> <span class="toctext">NVelocity View Engine</span></a>

<ul>
<li class="toclevel-2"><a href="#Is_there_a_way_to_render_a_content_of_another_view_within_a_view.3F"><span class="tocnumber">5.1</span> <span class="toctext">Is there a way to render a content of another view within a view?</span></a></li>
<li class="toclevel-2"><a href="#Is_there_any_way_to_generate_arrays_with_NVelocity.3F"><span class="tocnumber">5.2</span> <span class="toctext">Is there any way to generate arrays with NVelocity?</span></a></li>
<li class="toclevel-2"><a href="#Can_I_use_WebForm_Controls_on_NVelocity_template.3F"><span class="tocnumber">5.3</span> <span class="toctext">Can I use WebForm Controls on NVelocity template?</span></a></li>
</ul>
</li>
</ul>
</td></tr>
</table>

#end

#macro(createGroup $group)
#set($groupType = $group.GetAttribute("type"))
#set($menus = $group.selectNodes("menu"))
  <div class="${groupType}menu">
    <div class="${groupType}menucontent">

#foreach($menu in $menus)
#set($title = $menu.get_Item("title"))
  <span class="menutitle">$title.FirstChild.InnerXml</span>
  <ul>
#set($items = $menu.selectNodes("li"))

#foreach($item in $items)
    <li>$item.FirstChild.InnerXml</li>
#end
  </ul>
#if($menus.size() > 1)<br/>#end
#end
    </div>
  </div>
  <br/>
#end

#macro( createMenu )
#set ($groups = $project.SelectNodes("body/group"))
#foreach ( $group in $groups )
  #createGroup( $group )
#end
#end

#macro(document)
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
  #set ($authors = $root.get_Item("properties").SelectNodes("author"))
  #foreach($au in $authors)
    <!-- 
	$au.FirstChild.Value
	$au.GetAttribute("email")
	#metaauthor($au.FirstChild.Value $au.GetAttribute("email")) 
	-->
  #end
  
  <title>$root.get_Item("properties").get_Item("title").FirstChild.Value :: $project.SelectSingleNode("project/title").FirstChild.Value</title>
  <link rel="stylesheet" href="$relativePath/base.css" />
  <link rel="stylesheet" href="$relativePath/elem.css" />
 </head>

<body>

<div id="container">

  <div id="topbuttonscontainer"></div>

  <div id="maintitle">
    <h1> <a href="/" title="Home" accesskey="1">Home</a> </h1>
  </div>

  <div id="mainbar">
    <div id="mainbarleft"><div id="mainbarright"></div></div>
  </div>
  
  <div id="page">
		<div id="sidebar">
		
#createMenu()

			<br/>
		</div>
		
		<div id="content">
		<div class="callout-pic"><img src="$relativePath/images/monorail-med.png" /></div>

		<h1 class="firstHeading">
		    $root.SelectSingleNode("properties").SelectSingleNode("title").FirstChild.Value
		</h1> 


#set($introElem = $root.getChild("body").getChild("intro"))	
#if($introElem)
  $introElem.getContent()
#end
<!--
#set($tocElem = $root.getChild("body").getChild("toc"))	
#if($tocElem)
#buildtoc( $tocElem )
#end
-->
		
		<!-- start content -->
		
#set($allSections = $root.SelectSingleNode("body").SelectNodes("section"))
#foreach($section in $allSections)
#section($section 1)
#end
		
	    <!-- end content -->

	<div id="footer">
	<ul>
		<li id="f-lastmod"> This page was last modified 03:10, 21 June 2006.</li>		
		<li id="f-viewcount">This page has been accessed 9,774 times.</li>
	</ul>
	<ul>
		<li id="f-about"><a href="/index.php/Castle:About" title="Castle:About">About Castle</a></li>		
	</ul>
	</div>

		</div> <!-- end of content -->
  </div><!-- end of page -->
  
</div>

 </body>
</html>
#end

#document()
