<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="DataBound.aspx.cs" Inherits="AspnetSample.views.DataBound" %>

<%@ Register Assembly="Castle.MonoRail.Framework" Namespace="Castle.MonoRail.Framework.Views.Aspx" TagPrefix="mr" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Binding Actions to DataBound Controls</title>
    <style type="text/css">
		li
		{
			margin-top: 10px;
		}
</style>
</head>
<body>
    <form id="form1" runat="server">
		<h2>DataBound Controls</h2>
		<ul>
			<li>GridView:<asp:GridView ID="grdEmployees" runat="server" DataSource="<%# Employees %>"
				AutoGenerateDeleteButton="True" AutoGenerateEditButton="True" AutoGenerateSelectButton="True" 
				AllowSorting="true" OnRowEditing="grdEmployees_RowEditing" OnSorting="grdEmployees_Sorting">
			</asp:GridView>
			</li>
		</ul>
		<asp:HyperLink ID="lnkIndex" NavigateUrl="~/binding/Index.rails" runat="server">Index</asp:HyperLink>	
    </form>
    <mr:ControllerBinder ID="ControllerBinder" runat="server">
		<ControllerBindings>
			<mr:ControllerBinding ControlID="grdEmployees">
				<mr:ActionBinding EventName="RowCommand">
					<CommandBindings>
						<mr:CommandBinding ActionName="SelectRow" CommandName="Select">
						</mr:CommandBinding>
						<mr:CommandBinding ActionName="EditRow" CommandName="Edit">
						</mr:CommandBinding>
						<mr:CommandBinding ActionName="SortRows" CommandName="Sort">
						</mr:CommandBinding>
					</CommandBindings>
					<ActionArguments>
						<mr:ActionArgument Expression="$event.CommandArgument" Name="argument" />
					</ActionArguments>
				</mr:ActionBinding>
				<mr:ActionBinding ActionName="DeleteRow" EventName="RowDeleting">
					<ActionArguments>
						<mr:ActionArgument Expression="$event.RowIndex" Name="rowIndex" />
					</ActionArguments>
				</mr:ActionBinding>
			</mr:ControllerBinding>
		</ControllerBindings>
    </mr:ControllerBinder>
</body>
</html>
